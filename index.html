
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>LLM Cost Calculator</title>

    <style>
      :root {
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #010407;
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --border-color: #475569;
        --border-secondary: #334155;
        --accent-blue: #3b82f6;
        --accent-secondary: #64748b;
        --accent-danger: #ef4444;
        --accent-success: #10b981;
        --accent-success-bg: #064e3b;
        --accent-cyan: #06b6d4;
        --accent-blue-light: #38bdf8;
        --accent-orange: #f59e0b;
        --accent-purple: #8b5cf6;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
      }

      [data-theme="light"] {
        --bg-primary: #ffffff;
        --bg-secondary: #f8fafc;
        --bg-tertiary: #e2e8f0;
        --text-primary: #0f172a;
        --text-secondary: #64748b;
        --border-color: #cbd5e1;
        --border-secondary: #e2e8f0;
        --accent-blue: #3b82f6;
        --accent-secondary: #64748b;
        --accent-danger: #ef4444;
        --accent-success: #059669;
        --accent-success-bg: #d1fae5;
        --accent-cyan: #0891b2;
        --accent-blue-light: #0ea5e9;
        --accent-orange: #d97706;
        --accent-purple: #7c3aed;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.15);
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.6) 0%, rgba(30, 41, 59, 0.6) 100%), url('images/background.png');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        color: var(--text-primary);
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
        transition: all 0.3s ease;
        min-height: 100vh;
        line-height: 1.6;
      }

      h1 {
        text-align: center;
        font-size: 2.5rem;
        font-weight: 700;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        margin-bottom: 3rem;
      }

      h2 {
        color: var(--accent-blue-light);
        margin: 0 0 1rem 0;
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .section {
        background: var(--bg-secondary);
        border-radius: 16px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border-secondary);
        transition: all 0.3s ease;
      }

      .section:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
      }

      input,
      select {
        padding: 12px 16px;
        border-radius: 12px;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 14px;
        transition: all 0.3s ease;
        width: 100%;
        height: 48px;
        box-sizing: border-box;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: var(--accent-blue);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        transform: translateY(-1px);
      }

      button {
        padding: 12px 24px;
        border-radius: 12px;
        border: none;
        background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
        color: white;
        font-weight: 600;
        cursor: pointer;
        margin: 8px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow);
        font-size: 14px;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      button.secondary {
        background: linear-gradient(135deg, var(--accent-secondary), var(--bg-tertiary));
      }

      button.danger {
        background: linear-gradient(135deg, var(--accent-danger), #dc2626);
      }

      .card {
        background: var(--bg-primary);
        border: 1px solid var(--border-secondary);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
        box-shadow: var(--shadow);
      }

      .card:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-lg);
      }

      .results-card {
        border-left: 4px solid var(--accent-cyan);
        background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
      }

      .default {
        border-left: 4px solid var(--accent-blue-light);
      }
      .custom {
        border-left: 4px solid var(--accent-orange);
      }
      .cheapest {
        background: linear-gradient(135deg, var(--accent-success-bg), var(--bg-secondary)) !important;
        border-left: 4px solid var(--accent-success) !important;
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.2) !important;
      }

      .region-header {
        background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
        border-left: 4px solid var(--accent-purple);
        margin-top: 1.5rem;
        font-weight: 600;
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr;
        margin-bottom: 20px;
      }

      .form-field {
        display: flex;
        flex-direction: column;
      }

      .form-field label {
        margin-bottom: 8px;
        color: white;
        font-weight: 600;
        font-size: 14px;
      }

      .comparison-card {
        background: var(--bg-primary);
        border: 1px solid var(--border-secondary);
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 0.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-card.selected {
        border-color: var(--accent-blue);
        background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
      }

      .price-diff {
        font-weight: 600;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 12px;
      }

      .price-diff.positive {
        color: var(--accent-danger);
        background: rgba(239, 68, 68, 0.1);
      }

      .price-diff.negative {
        color: var(--accent-success);
        background: rgba(16, 185, 129, 0.1);
      }

      .label {
        font-size: 12px;
        color: var(--text-secondary);
        background: var(--bg-tertiary);
        padding: 4px 8px;
        border-radius: 6px;
        font-weight: 500;
      }

      hr {
        margin: 3rem 0;
        border: none;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--border-secondary), transparent);
      }

      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.12);
        border-radius: 25px;
        width: 80px;
        height: 36px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1000;
        display: flex;
        align-items: center;
        padding: 3px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.12);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      .theme-toggle::before {
        content: '';
        position: absolute;
        width: 28px;
        height: 28px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateX(2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .theme-toggle.light::before {
        transform: translateX(46px);
        background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
      }

      .theme-toggle span {
        position: absolute;
        font-size: 9px;
        font-weight: 800;
        color: white;
        transition: all 0.4s ease;
        pointer-events: none;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }

      [data-theme="light"] .theme-toggle span {
        color: #000000;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
      }

      .theme-toggle .moon-icon {
        left: 34px;
      }

      .theme-toggle .sun-icon {
        left: 8px;
      }

      .theme-toggle .sun-icon {
        filter: drop-shadow(0 0 8px rgba(255, 255, 0, 0.8));
      }

      .theme-toggle .moon-icon {
        filter: drop-shadow(0 0 4px rgba(200, 200, 255, 0.6));
      }

      .theme-toggle svg {
        width: 20px;
        height: 20px;
        fill: white;
        transition: all 0.3s ease;
      }

      .tab-container {
        display: flex;
        gap: 8px;
        margin: 1.5rem 0;
        background: var(--bg-primary);
        padding: 8px;
        border-radius: 12px;
        border: 1px solid var(--border-secondary);
      }

      .tab-container button {
        margin: 0;
        flex: 1;
        border-radius: 8px;
      }

      /* ===================== TWO-COLUMN LAYOUT ===================== */
      .main-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: start;
      }

      .left-column {
        display: flex;
        flex-direction: column;
        gap: 2rem;
      }

      .right-column {
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .right-column .section {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      /* ===================== ACCORDION STYLES ===================== */
      .accordion-item {
        border: 1px solid var(--border-secondary);
        border-radius: 8px;
        margin-bottom: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .accordion-header {
        background: var(--bg-secondary);
        padding: 12px 16px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.3s ease;
        user-select: none;
      }

      .accordion-header:hover {
        background: var(--bg-tertiary);
      }

      .accordion-header.active {
        background: var(--accent-blue);
        color: white;
      }

      .accordion-title {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .accordion-title .model-name {
        font-weight: bold;
        font-size: 14px;
      }

      .accordion-title .model-info {
        font-size: 12px;
        opacity: 0.8;
      }

      .accordion-icon {
        transition: transform 0.3s ease;
        font-size: 18px;
      }

      .accordion-icon.rotated {
        transform: rotate(180deg);
      }

      .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        background: var(--bg-primary);
      }

      .accordion-content.expanded {
        max-height: 250px;
      }

      .accordion-body {
        padding: 16px;
        border-top: 1px solid var(--border-secondary);
      }

      .accordion-field {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
      }

      .accordion-field label {
        min-width: 80px;
        font-size: 12px;
        font-weight: 500;
        color: var(--text-secondary);
      }

      .accordion-field input {
        flex: 1;
        padding: 6px 8px;
        font-size: 12px;
        border: 1px solid var(--border-secondary);
        border-radius: 4px;
        background: var(--bg-secondary);
      }

      .accordion-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
      }

      .accordion-actions button {
        padding: 6px 12px;
        font-size: 12px;
        border-radius: 4px;
      }

      @media (max-width: 768px) {
        body {
          padding: 20px 15px;
        }
        .section {
          padding: 1.5rem;
        }
        h1 {
          font-size: 2rem;
        }
        .main-container {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
        .row {
          flex-direction: column;
          align-items: stretch;
        }
        input,
        select {
          min-width: auto;
          width: 100%;
        }
        #regionCheckboxes {
          max-height: 150px !important;
        }
        #regionCheckboxes > div {
          grid-template-columns: 1fr !important;
        }
      }

      .custom-dropdown {
        position: relative;
        width: 100%;
      }

      .dropdown-header {
        padding: 12px 16px;
        border-radius: 12px;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 14px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
        height: 48px;
        box-sizing: border-box;
      }

      .dropdown-header:hover {
        border-color: var(--accent-blue);
        transform: translateY(-1px);
      }

      .dropdown-arrow {
        transition: transform 0.3s ease;
      }

      .dropdown-arrow.rotated {
        transform: rotate(180deg);
      }

      .dropdown-content {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        border-top: none;
        border-radius: 0 0 12px 12px;
        max-height: 200px;
        overflow-y: auto;
        z-index: 1000;
        box-shadow: var(--shadow);
      }

      .dropdown-option {
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 12px;
        color: var(--text-primary);
      }

      .dropdown-option:hover {
        background: var(--bg-secondary);
      }

      .dropdown-option input[type="checkbox"] {
        width: auto;
        height: auto;
        margin: 0;
      }

      .dropdown-option label {
        color: var(--text-primary);
        cursor: pointer;
      }
      
      /* Navigation Tabs */
      .nav-tabs {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin: 1rem 0;
      }
      
      .nav-tab {
        padding: 8px 16px;
        border: 1px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 13px;
        font-weight: 500;
      }
      
      .nav-tab:hover {
        border-color: var(--accent-blue);
      }
      
      .nav-tab.active {
        background: var(--accent-blue);
        color: white;
        border-color: var(--accent-blue);
      }
      
      .tab-content {
        display: none;
      }
      
      .tab-content.active {
        display: block;
      }
    </style>
  </head>

  <body>
    <div class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
      <span class="moon-icon">DARK</span>
      <span class="sun-icon" style="display: none;">LIGHT</span>
    </div>
    <div style="text-align: center; margin-bottom: 1rem;">
      <img src="images/bedrock-icon.png" alt="LLM Cost Calculator" style="width: 80px; height: 80px; border-radius: 12px;">
    </div>
    <h1>
      
      LLM Cost Calculator
    </h1>
    
    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <button class="nav-tab active" onclick="showTab('cost-calculation')">Cost Calculation</button>
      <button class="nav-tab" onclick="showTab('embedding-calculation')">Embedding Calculation</button>
      <button class="nav-tab" onclick="showTab('token-counter')">Token Counter</button>
      <button class="nav-tab" onclick="showTab('calculation-info')">Calculation Info</button>
    </div>
    
    <!-- Cost Calculation Tab Content -->
    <div id="cost-calculation" class="tab-content active">
    <div class="main-container">
      <!-- LEFT COLUMN -->
      <div class="left-column">
        <!-- TOKEN INPUT & COST CALCULATION -->
        <div class="section">
          <h2>Token Input & Cost Calculation</h2>

          <div class="form-grid">
            <div class="form-field">
              <label>Region</label>
              <select id="regionSelect">
                <option value="">Select Region</option>
              </select>
            </div>
            <div class="form-field">
              <label>Provider</label>
              <select id="providerFilter">
                <option value="">Select Provider</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field">
              <label>Model</label>
              <select id="modelSelect">
                <option value="">Select Model</option>
              </select>
            </div>
          </div>

          <div class="form-grid">
            <div class="form-field">
              <label>Input Tokens</label>
              <input id="inputTokens" placeholder="Input Tokens" value="1000" />
            </div>
            <div class="form-field">
              <label>Output Tokens</label>
              <input id="outputTokens" placeholder="Output Tokens" value="1000" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-field">
              <label>Requests per Month</label>
              <input id="requestsPerMonth" placeholder="Requests / Month" value="1" />
            </div>
          </div>

          <div class="row">
            <button id="calculateBtn" onclick="calculateCost()">Calculate Cost</button>
            <button id="compareAllBtn" class="secondary" onclick="compareAllModels()">Compare All Models</button>
            <button id="compareBtn" class="secondary" onclick="showModelSelection()">Compare Models</button>
          </div>

          <div id="results"></div>
          <div id="modelSelection" style="display: none;"></div>
          <div id="comparison" style="display: none;"></div>
        </div>

        <!-- ADD MODEL PRICING -->
        <div class="section">
          <h2>Add Model Pricing</h2>

          <div class="form-row">
            <div class="form-field">
              <label>Provider Name</label>
              <select id="providerName" onchange="showReferencePricing(); toggleCustomProvider()">
                <option value="">Select Provider</option>
                <option value="Amazon">Amazon</option>
                <option value="Anthropic">Anthropic</option>
                <option value="Google">Google</option>
                <option value="MiniMax AI">MiniMax AI</option>
                <option value="Mistral AI">Mistral AI</option>
                <option value="Moonshot AI">Moonshot AI</option>
                <option value="NVIDIA">NVIDIA</option>
                <option value="OpenAI">OpenAI</option>
                <option value="Qwen">Qwen</option>
                <option value="Stability AI">Stability AI</option>
                <option value="TwelveLabs">TwelveLabs</option>
                <option value="Writer">Writer</option>
                <option value="Other">Other (Custom)</option>
              </select>
            </div>
          </div>

          <div class="form-row" id="customProviderRow" style="display: none;">
            <div class="form-field">
              <label>Custom Provider</label>
              <input id="customProvider" placeholder="Enter custom provider" />
            </div>
          </div>

          <div class="form-row" id="regionSelectionRow" style="display: none;">
            <div class="form-field">
              <label>Region</label>
              <div class="custom-dropdown">
                <div class="dropdown-header" onclick="toggleRegionDropdown()">
                  <span id="regionDropdownText">Select Region</span>
                  <span class="dropdown-arrow">▼</span>
                </div>
                <div id="regionDropdownContent" class="dropdown-content" style="display: none;">
                </div>
              </div>
            </div>
          </div>

          <div id="referencePricing"></div>

          <div class="form-grid">
            <div class="form-field">
              <label>Model Name</label>
              <input id="modelName" placeholder="Model Name" />
            </div>
            <div class="form-field">
              <label>Region</label>
              <input id="region" placeholder="Region (us-east-1)" />
            </div>
          </div>

          <div class="form-grid">
            <div class="form-field">
              <label>Input Cost</label>
              <input id="inputCost" placeholder="Input cost ($ / 1K)" />
            </div>
            <div class="form-field">
              <label>Output Cost</label>
              <input id="outputCost" placeholder="Output cost ($ / 1K)" />
            </div>
          </div>

          <button onclick="addModel()">Add Model</button>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div class="right-column">
        <div class="section">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
            <h2 style="margin: 0;">Model Management & Configuration</h2>
            <div style="text-align: right;">
              <p style="color: var(--text-secondary); font-size: 0.8rem; margin: 0 0 0.25rem 0;">Source of Truth</p>
              <a href="https://aws.amazon.com/bedrock/pricing/" target="_blank" style="font-size: 0.9rem; color: var(--accent-cyan); text-decoration: none;"> AWS Bedrock Pricing</a>
            </div>
          </div>
          
          <button class="secondary" onclick="resetDefaults()">Reset Custom Models</button>

          <div class="tab-container">
            <button id="allTab" class="secondary" onclick="showAllModels()">All Models</button>
            <button id="filterTab" onclick="showFilteredModels()">Filter Models</button>
          </div>

          <div id="filterControls" style="display: none; margin-top: 10px">
            <div class="row">
              <select id="filterRegion">
                <option value="">Select Region</option>
              </select>
              <select id="filterProvider">
                <option value="">Select Provider</option>
              </select>
              <button onclick="applyFilter()">Apply Filter</button>
              <button class="secondary" onclick="clearFilter()">Clear</button>
            </div>
          </div>

          <div id="modelList" style="max-height: 805px; overflow-y: auto;"></div>
        </div>
      </div>
    </div>
    </div>
    
    <!-- Embedding Calculation Tab Content -->
    <div id="embedding-calculation" class="tab-content">
      <div class="section">
        <h2>Embedding Calculation</h2>
        
        <div class="form-grid">
          <div class="form-field">
            <label>Select Embedding Model</label>
            <select id="embeddingModel" onchange="updateEmbeddingPrice()">
              <option value="titan-v1">Amazon Titan Text Embedding V1</option>
              <option value="titan-v2" selected>Amazon Titan Text Embedding V2</option>
              <option value="cohere-embed">Cohere Embed English</option>
              <option value="cohere-embed-multilingual">Cohere Embed Multilingual</option>
            </select>
          </div>
          <div class="form-field">
            <label>Select Input Type</label>
            <select id="inputType">
              <option value="data-size" selected>Total Data Size in GB</option>
              <option value="token-count">Token Count</option>
              <option value="character-count">Character Count</option>
            </select>
          </div>
          <div class="form-field">
            <label>Enter Value</label>
            <input id="inputValue" type="number" value="1" min="0" step="0.01" />
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label>Model Price ($ per 1000 tokens)</label>
            <input id="modelPrice" type="number" value="0.000024" min="0" step="0.000001" />
          </div>
        </div>
        
        <div style="text-align: center; margin: 1rem 0;">
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0 0 0.5rem 0;">Source of Truth</p>
          <a href="https://aws.amazon.com/bedrock/pricing/" target="_blank" style="color: var(--accent-cyan); text-decoration: none;">AWS Bedrock Pricing</a>
        </div>
        
        <div class="row">
          <button onclick="calculateEmbedding()">Calculate Embedding Model Cost</button>
          <button class="secondary" onclick="resetEmbedding()">Reset</button>
        </div>
        
        <div id="embeddingResults"></div>
      </div>
    </div>
    
    <!-- Token Counter Tab Content -->
    <div id="token-counter" class="tab-content">
      <div class="section">
        <h2>Token Counter</h2>
        
        <div class="form-grid">
          <div class="form-field">
            <label>Counting Mode</label>
            <select id="countingMode" onchange="toggleCountingMode()">
              <option value="simple">Simple Estimation (Fast)</option>
              <option value="model-specific">Model-Specific (Accurate)</option>
            </select>
          </div>
          <div class="form-field" id="modelSelectionField" style="display: none;">
            <label>Select Model Family</label>
            <select id="tokenModel">
              <option value="gpt">OpenAI GPT Models</option>
              <option value="claude">Anthropic Claude Models</option>
              <option value="llama">Meta Llama Models</option>
              <option value="gemma">Google Gemma Models</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-field">
            <label>Enter Text</label>
            <textarea id="inputText" placeholder="Enter your text here to count tokens..." rows="8" style="width: 100%; padding: 12px; border-radius: 12px; border: 2px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary); font-family: inherit; resize: vertical;"></textarea>
          </div>
        </div>
        
        <div class="row">
          <button onclick="countTokens()">Count Tokens</button>
          <button class="secondary" onclick="clearTokenCounter()">Clear</button>
        </div>
        
        <div id="tokenResults"></div>
      </div>
    </div>
    
    <!-- Calculation Info Tab Content -->
    <div id="calculation-info" class="tab-content">
      <div class="section">
        <h2>Calculation Info & Methodology</h2>
        
        <div class="form-grid">
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> How LLM Pricing Works</h3>
            <p><strong>Token-Based Pricing:</strong> LLM providers charge based on tokens processed.</p>
            <p><strong>Input Tokens:</strong> Your prompt, system instructions, context (cheaper)</p>
            <p><strong>Output Tokens:</strong> AI-generated response (more expensive)</p>
            <p><strong>Why Different?</strong> Output generation requires more computational resources.</p>
            <p><strong>Billing Model:</strong> Pay-per-use, no upfront costs or minimum commitments</p>
          </div>
          
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Token Calculation</h3>
            <p><strong>What Are Tokens:</strong> Pieces of text (words, parts of words, punctuation)</p>
            <p><strong>Example:</strong> "Hello world!" = 3 tokens</p>
            <p><strong>Estimation:</strong> ~4 characters = 1 token (varies by model)</p>
            <p><strong>Input Components:</strong> User prompt + system prompt + context + examples</p>
            <p><strong>Tokenizers:</strong> Each model family uses different tokenization methods</p>
          </div>
        </div>
        
        <div class="form-grid">
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Request Processing</h3>
            <p><strong>Tokenization:</strong> Text converted to tokens using model-specific tokenizers</p>
            <p><strong>Context Window:</strong> Models have limits (4K, 8K, 32K, 128K tokens)</p>
            <p><strong>Processing:</strong> Input tokens processed simultaneously</p>
            <p><strong>Generation:</strong> Output tokens generated sequentially</p>
            <p><strong>Latency:</strong> Response time depends on output length and model size</p>
          </div>
          
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> LLM Cost Calculation Details</h3>
            <div style="background: var(--bg-tertiary); padding: 1rem; border-radius: 8px; font-family: monospace; margin: 1rem 0;">
              <strong>Step-by-Step Calculation:</strong><br>
              1. Count Input Tokens (prompt + context)<br>
              2. Count Output Tokens (response)<br>
              3. Input Cost = (Input Tokens / 1000) × Input Price<br>
              4. Output Cost = (Output Tokens / 1000) × Output Price<br>
              5. Per Request = Input Cost + Output Cost<br>
              6. Monthly = Per Request × Requests/Month
            </div>
            <p><strong>Real Example:</strong> Claude 3 Sonnet - 1000 input, 500 output, 100 requests</p>
            <p><strong>Calculation:</strong> (1000/1000 × $0.003) + (500/1000 × $0.015) = $0.30 + $0.75 = $1.05 × 100 = $105/month</p>
          </div>
        </div>
        
        <div class="form-grid">
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Cost Optimization</h3>
            <p><strong>Shorter Prompts:</strong> Reduce input tokens by being concise</p>
            <p><strong>Limit Output:</strong> Set max_tokens to control response length</p>
            <p><strong>Choose Right Model:</strong> Smaller models for simple tasks</p>
            <p><strong>Batch Processing:</strong> Combine multiple requests when possible</p>
            <p><strong>Caching:</strong> Store and reuse common responses</p>
            <p><strong>Prompt Engineering:</strong> Optimize prompts for efficiency</p>
          </div>
          
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Model Selection</h3>
            <p><strong>Larger Models:</strong> Better quality, higher cost (GPT-4, Claude 3 Opus)</p>
            <p><strong>Smaller Models:</strong> Lower cost, adequate for simple tasks (GPT-3.5, Claude 3 Haiku)</p>
            <p><strong>Regional Pricing:</strong> Prices may vary by AWS region</p>
            <p><strong>Availability:</strong> Not all models available in all regions</p>
            <p><strong>Performance:</strong> Balance between cost and quality requirements</p>
            <p><strong>Use Cases:</strong> Match model capabilities to specific tasks</p>
          </div>
        </div>
        
        <div class="form-grid">
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Pricing Factors</h3>
            <p><strong>Model Size:</strong> Larger models cost more per token</p>
            <p><strong>Model Type:</strong> Specialized models may have different pricing</p>
            <p><strong>Region:</strong> Geographic location affects pricing</p>
            <p><strong>Volume:</strong> Some providers offer volume discounts</p>
            <p><strong>Time of Day:</strong> Generally consistent, no peak hour pricing</p>
            <p><strong>Request Type:</strong> Streaming vs batch may have different costs</p>
          </div>
          
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Embedding Cost Calculation</h3>
            <p><strong>Embedding Models:</strong> Separate pricing from text generation models</p>
            <p><strong>Input Only Pricing:</strong> Only input tokens charged (no output tokens)</p>
            <p><strong>Cost Formula:</strong> Total Cost = Input Tokens × Price per 1K tokens</p>
            <p><strong>Example:</strong> 1GB data = 161M tokens × $0.000024/1K = $3.86</p>
            <p><strong>Conversion Rates:</strong> 1GB ≈ 161M tokens, 1 char ≈ 0.25 tokens</p>
            <p><strong>Use Cases:</strong> Search, recommendations, similarity, clustering</p>
          </div>
        </div>
        
        <div class="form-grid">
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Important Notes</h3>
            <p><strong>Rate Limits:</strong> Models have requests per minute/hour limits</p>
            <p><strong>Context Limits:</strong> Maximum tokens per request varies by model</p>
            <p><strong>Failed Requests:</strong> Generally no charge for failed requests</p>
            <p><strong>System Prompts:</strong> Count as input tokens in every request</p>
            <p><strong>Conversation History:</strong> Previous messages count as input tokens</p>
            <p><strong>Price Changes:</strong> Providers may update pricing periodically</p>
          </div>
          
          <div class="card">
            <h3 style="color: var(--accent-blue); margin: 0 0 1rem 0;"> Best Practices</h3>
            <p><strong>Monitor Usage:</strong> Track token consumption regularly</p>
            <p><strong>Set Budgets:</strong> Implement spending limits and alerts</p>
            <p><strong>Test Models:</strong> Compare quality vs cost for your use case</p>
            <p><strong>Optimize Prompts:</strong> Iterate to find most efficient prompts</p>
            <p><strong>Use Appropriate Models:</strong> Don't over-engineer for simple tasks</p>
            <p><strong>Plan Scaling:</strong> Consider costs when scaling applications</p>
          </div>
        </div>
        
        <div style="text-align: center; margin: 2rem 0;">
          <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0 0 0.5rem 0;">For Latest Pricing Information</p>
          <a href="https://aws.amazon.com/bedrock/pricing/" target="_blank" style="color: var(--accent-cyan); text-decoration: none; font-weight: 600;"> AWS Bedrock Official Pricing</a>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
    <script>
      // Theme management
      function toggleTheme() {
        const body = document.body;
        const toggle = document.querySelector(".theme-toggle");
        const moonIcon = document.querySelector(".moon-icon");
        const sunIcon = document.querySelector(".sun-icon");

        if (body.getAttribute("data-theme") === "light") {
          body.removeAttribute("data-theme");
          toggle.classList.remove("light");
          moonIcon.style.display = "block";
          sunIcon.style.display = "none";
          localStorage.setItem("theme", "dark");
        } else {
          body.setAttribute("data-theme", "light");
          toggle.classList.add("light");
          moonIcon.style.display = "none";
          sunIcon.style.display = "block";
          localStorage.setItem("theme", "light");
        }
      }

      // Load saved theme
      function loadTheme() {
        const savedTheme = localStorage.getItem("theme");
        const toggle = document.querySelector(".theme-toggle");
        const moonIcon = document.querySelector(".moon-icon");
        const sunIcon = document.querySelector(".sun-icon");

        if (savedTheme === "light") {
          document.body.setAttribute("data-theme", "light");
          toggle.classList.add("light");
          moonIcon.style.display = "none";
          sunIcon.style.display = "block";
        } else {
          toggle.classList.remove("light");
          moonIcon.style.display = "block";
          sunIcon.style.display = "none";
        }
      }

      // Load theme on page load
      setTimeout(loadTheme, 100);
      
      // Tab Navigation
      function showTab(tabId) {
        // Hide all tab contents
        document.querySelectorAll('.tab-content').forEach(tab => {
          tab.classList.remove('active');
        });
        
        // Remove active class from all nav tabs
        document.querySelectorAll('.nav-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        
        // Show selected tab content
        document.getElementById(tabId).classList.add('active');
        
        // Add active class to clicked nav tab
        event.target.classList.add('active');
      }
      
      window.showTab = showTab;
    </script>
  </body>
</html>






    <!-- Modal for comparison results -->
    <div id="comparisonModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
      <div style="position: relative; background: var(--bg-primary); margin: 2% auto; padding: 20px; width: 90%; max-width: 1200px; border-radius: 12px; max-height: 90%; overflow-y: auto;">
        <button onclick="closeComparisonModal()" style="position: absolute; top: 15px; right: 15px; background: var(--accent-danger); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;">×</button>
        <div id="modalContent"></div>
      </div>
    </div>
